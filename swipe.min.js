!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():a.Swipe=b()}(this,function(){"use strict";return function(a,b){function c(){t=x.children,w=t.length,C=t.length<2?!1:b.continuous,o.transitions&&C&&t.length<3&&(x.appendChild(t[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),t=x.children),u=new Array(t.length),v=Math.round(a.getBoundingClientRect().width||a.offsetWidth),x.style.width=t.length*v+"px";for(var c=t.length;c--;){var d=t[c];d.style.width=v+"px",d.setAttribute("data-index",c),o.transitions&&(d.style.left=c*-v+"px",h(c,A>c?-v:c>A?v:0,0))}C&&o.transitions&&(h(f(A-1),-v,0),h(f(A+1),v,0)),o.transitions||(x.style.left=A*-v+"px"),a.style.visibility="visible"}function d(){C?g(A-1):A&&g(A-1)}function e(){C?g(A+1):A<t.length-1&&g(A+1)}function f(a){return(t.length+a%t.length)%t.length}function g(a,c){if(A!=a){if(o.transitions){var d=Math.abs(A-a)/(A-a);if(C){var e=d;d=-u[f(a)]/v,d!==e&&(a=-d*t.length+a)}for(var g=Math.abs(A-a)-1;g--;)h(f((a>A?a:A)-g-1),v*d,0);a=f(a),h(A,v*d,c||B),h(a,0,c||B),C&&h(f(a-d),-(v*d),0)}else a=f(a),j(A*-v,a*-v,c||B);A=a,n(b.callback&&b.callback(A,t[A]))}}function h(a,b,c){i(a,b,c),u[a]=b}function i(a,b,c){var d=t[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px,0)translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function j(a,c,d){if(!d)return void(x.style.left=c+"px");var e=+new Date,f=setInterval(function(){var g=+new Date-e;return g>d?(x.style.left=c+"px",D&&k(),b.transitionEnd&&b.transitionEnd.call(event,A,t[A]),void clearInterval(f)):void(x.style.left=(c-a)*(Math.floor(g/d*100)/100)+a+"px")},4)}function k(){clearTimeout(y),y=setTimeout(e,D)}function l(){D=0,clearTimeout(y)}var m=function(){},n=function(a){setTimeout(a||m,0)},o={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,mstouch:window.navigator&&window.navigator.msPointerEnabled,pointer:window.navigator&&window.navigator.pointerEnabled,transitions:function(a){var b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))},p="mousedown",q="mousemove",r="mouseup";if(o.touch?(p="touchstart",q="touchmove",r="touchend"):o.pointer?(p="pointerdown",q="pointermove",r="pointerup"):o.mstouch&&(p="MSPointerDown",q="MSPointerMove",r="MSPointerUp"),a){var t,u,v,w,x=a.children[0];b=b||{};var y,z,A=parseInt(b.startSlide,10)||0,B=b.speed||300,C=b.continuous=void 0!==b.continuous?b.continuous:!0,D=b.auto||0,E={},F={},G={handleEvent:function(a){switch(a.type){case p:this.start(a);break;case q:this.move(a);break;case r:n(this.end(a));break;case"click":a.preventDefault(),a.stopImmediatePropagation();break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":n(this.transitionEnd(a));break;case"resize":n(c)}b.stopPropagation&&a.stopPropagation()},start:function(a){var b=o.touch?a.touches[0]:a;o.touch||a.preventDefault(),E={x:b.pageX,y:b.pageY,time:+new Date},z=void 0,F={},x.addEventListener(q,this,!1),x.addEventListener(r,this,!1)},move:function(a){if(!(a.touches&&a.touches.length>1||a.scale&&1!==a.scale||b.disableScroll)){var c=o.touch?a.touches[0]:a;F={x:c.pageX-E.x,y:c.pageY-E.y},"undefined"==typeof z&&(z=!!(z||Math.abs(F.x)<Math.abs(F.y))),z||(a.preventDefault(),l(),C?(i(f(A-1),F.x+u[f(A-1)],0),i(A,F.x+u[A],0),i(f(A+1),F.x+u[f(A+1)],0)):(F.x=F.x/(!A&&F.x>0||A==t.length-1&&F.x<0?Math.abs(F.x)/v+1:1),i(A-1,F.x+u[A-1],0),i(A,F.x+u[A],0),i(A+1,F.x+u[A+1],0)),b.swiping&&b.swiping(-F.x/v))}},end:function(a){var c=+new Date-E.time,d=Number(c)<250&&Math.abs(F.x)>20||Math.abs(F.x)>v/2,e=!A&&F.x>0||A==t.length-1&&F.x<0;C&&(e=!1);var g=F.x<0;z||(d&&!e?(g?(C?(h(f(A-1),-v,0),h(f(A+2),v,0)):h(A-1,-v,0),h(A,u[A]-v,B),h(f(A+1),u[f(A+1)]-v,B),A=f(A+1)):(C?(h(f(A+1),v,0),h(f(A-2),-v,0)):h(A+1,v,0),h(A,u[A]+v,B),h(f(A-1),u[f(A-1)]+v,B),A=f(A-1)),b.callback&&b.callback(A,t[A])):C?(h(f(A-1),-v,B),h(A,0,B),h(f(A+1),v,B)):(h(A-1,-v,B),h(A,0,B),h(A+1,v,B))),x.removeEventListener(q,G,!1),x.removeEventListener(r,G,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==A&&(D&&k(),b.transitionEnd&&b.transitionEnd.call(a,A,t[A]))}};return c(),D&&k(),o.addEventListener?(x.addEventListener(p,G,!1),b.preventClick&&x.addEventListener("click",G,!1),o.transitions&&(x.addEventListener("webkitTransitionEnd",G,!1),x.addEventListener("msTransitionEnd",G,!1),x.addEventListener("oTransitionEnd",G,!1),x.addEventListener("otransitionend",G,!1),x.addEventListener("transitionend",G,!1)),window.addEventListener("resize",G,!1)):window.onresize=function(){c()},{setup:function(){c()},slide:function(a,b){l(),g(a,b)},prev:function(){l(),d()},next:function(){l(),e()},stop:function(){l()},getPos:function(){return A},getNumSlides:function(){return w},kill:function(){l(),x.style.width="",x.style.left="";for(var a=t.length;a--;){var c=t[a];c.style.width="",c.style.left="",o.transitions&&i(a,0,0)}o.addEventListener?(x.removeEventListener(p,G,!1),b.preventClick&&x.removeEventListener("click",G,!1),s,x.removeEventListener("webkitTransitionEnd",G,!1),x.removeEventListener("msTransitionEnd",G,!1),x.removeEventListener("oTransitionEnd",G,!1),x.removeEventListener("otransitionend",G,!1),x.removeEventListener("transitionend",G,!1),window.removeEventListener("resize",G,!1)):window.onresize=null}}}}});